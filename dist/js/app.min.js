!function(){"use strict";angular.module("app",["ui.router","ngStorage"]).constant("config",{URL:"https://idrissdidac.com",DIST:"/dist",IMAGES:{root:"/dist/images/",categories:"/dist/images/products/categories",projects:"/dist/images/products/projects"},DATA:"/dist/api/data.json",DOCUMENTS:"/dist/api/documents.json",SLIDES:"/dist/api/slides.json"})}(),function(t){"use strict";function e(t,e,o){e.otherwise("/"),t.state("home",{url:"/",templateUrl:"dist/views/main.html",controller:"controller.main",controllerAs:"vm"}).state("categories",{url:"/categories/:categorie/:subCategorie",templateUrl:"dist/views/categories.html",controller:"controller.categories",controllerAs:"vm"}).state("about",{url:"/about",templateUrl:"dist/views/about.html",controller:"controller.about",controllerAs:"vm"}).state("contact",{url:"/contact",templateUrl:"dist/views/contact.html",controller:"controller.contact",controllerAs:"vm"}).state("products",{url:"/products/:categorie/:subCategorie/:product",templateUrl:"dist/views/products.html",controller:"controller.products",controllerAs:"vm"})}t.config(e),e.$inject=["$stateProvider","$urlRouterProvider","$locationProvider"]}(angular.module("app")),function(t){function e(t,e,o){function r(t){if("folder"==t.type){var e={name:t.name,urlname:t.urlname,discription:t.discription,id:t.id,type:t.type};return e.children=t.children.filter(function(t){return"folder"==t.type}).map(function(t){return r(t)}),e}}function n(){return a()}function a(){var r=e.getData();return r?(console.log("From cache"),r):t.get(o.DATA).then(function(t){return console.log("From server  "),e.saveData(t.data),t.data})}function i(t,e,o){if(0==e)var e="";console.log("sub ",e),n().then(function(r){angular.forEach(r.children,function(r){if(r.urlname===t){if(!e)return r.categorie=r.name,o(r);console.log("Subcategorie searche "),angular.forEach(r.children,function(t){if(t.urlname===e)return t.categorie=r.name,t.subCategorie=t.name,o(t)})}})})}function c(t,e,o,r){i(t,e,function(t){prod=t.children.filter(function(t,e){return t.urlname==o})[0],prod.path=prod.path.replace("/categories/","/projects/"),r(t,prod.id)})}function s(){return a().then(function(t){return data=r(t),data.children})}function l(){return t.get(o.SLIDES).then(function(t){return t.data.slides})}function u(){return t.get(o.DOCUMENTS).then(function(t){return angular.forEach(t.data.docs,function(t){t.filename=g(t.path)}),t.data})}function g(t){var e=t.replace(/^.*[\\\/]/,"");return e.substring(0,e.indexOf("."))}return{getSlides:l,getDocuments:u,getSideBar:s,getData:n,getProducts:i,getProduct:c}}t.factory("dataservice",e),e.$inject=["$http","storage","config"]}(angular.module("app")),function(t){"use strict";function e(t,e){function o(){var o=e.defer(),r=t.idrissdatav1;return r?(o.resolve(r),o.promise):null}function r(e){t.idrissdata=e}return{getData:o,saveData:r}}t.factory("storage",e),e.$inject=["$localStorage","$q"]}(angular.module("app")),function(t){"use strict";function e(){}angular.module("app").factory("logger",e)}(angular.module("app")),function(t){"use strict";t.directive("resolveLoader",function(t,e){return{restrict:"E",replace:!0,template:'<div class="alert alert-success ng-hide"><strong>Welcome!</strong> Content is loading, please hold.</div>',link:function(o,r){t.$on("$routeChangeStart",function(t,o,n){n||e(function(){r.removeClass("ng-hide")})}),t.$on("$routeChangeSuccess",function(){r.addClass("ng-hide")})}}})}(angular.module("app")),function(t){"use strict";function e(t){var e=this;e.contents=t.DIST}t.controller("controller.about",e),e.$inject=["config"]}(angular.module("app")),function(t){"use strict";function e(t,e,o){function r(){o.getProducts(n.categorie,n.subCategorie,function(t){n.categorieTitle=t.categorie,n.subCategorieTitle=t.subCategorie,console.log("Products from getproduct ",t),n.products.all=t.children,n.products.gotoPage(1)})}var n=this;n.products={page:1,all:[],products:[],gotoPage:function(t){var e=12*(t-1),o=e+12;o=o<this.total()?o:this.total(),this.products=this.all.slice(e,o),this.page=t,console.log("Products",n.products)},next:function(){var t=(this.page+1)%(this.totalPage()+1);console.log("next : ",t),t=t||1,this.gotoPage(t)},prior:function(){var t=(this.page-1)%this.totalPage();t=t||this.totalPage(),this.gotoPage(t)},total:function(){return this.all.length},totalPage:function(){return Math.ceil(this.total()/12)}},n.categorie=e.categorie,n.subCategorie=e.subCategorie,console.log("Category selected ",e),n.contents=t.DIST,r()}t.controller("controller.categories",e),e.$inject=["config","$stateParams","dataservice"]}(angular.module("app")),function(t){"use strict";function e(){}t.controller("controller.contact",e),e.$inject=[]}(angular.module("app")),function(t){"use strict";function e(t,e){var o=this;o.title="Documents à télécharger",o.documents={},o.contents=e.DIST,t.getDocuments().then(function(t){o.documents=t})}t.controller("controller.download",e),e.$inject=["dataservice","config"]}(angular.module("app")),function(t){"use strict";function e(t,e){function o(){r.contents=e.DIST,r.slides={list:[]}}var r=this;o()}t.controller("controller.main",e),e.$inject=["dataservice","config"]}(angular.module("app")),function(t){"use strict";function e(t,e,o){function r(){o.getProduct(n.categorie,n.subCategorie,n.productId,function(t,e){n.categorieTitle=t.categorie,n.subCategorieTitle=t.subCategorie,n.products.all=t.children,n.products.gotoPage(e-1),console.log("Product found ",t)})}var n=this;n.products={page:0,all:[],product:{},gotoPage:function(t){this.page=t,console.log(" all : ",this.all),this.product=this.all[this.page],this.product.path=this.product.path.replace("/categories/","/projects/")},next:function(){var t=(this.page+1)%this.all.length;this.gotoPage(t)},prior:function(){var t=this.page?this.page-1:this.all.length-1;this.gotoPage(t)},total:function(){return this.all.length},current:function(){return this.page+1}},n.categorie=e.categorie,n.subCategorie=e.subCategorie,0==n.subCategorie&&(n.subCategorie=""),n.productId=e.product,n.contents=t.DIST,r()}t.controller("controller.products",e),e.$inject=["config","$stateParams","dataservice"]}(angular.module("app")),function(t){"use strict";function e(t,e){function o(){r.contents=e.DIST,r.categoryTitle="Categories",t.getSideBar().then(function(t){r.categories=t,console.log("Categories",t)})}var r=this;o()}t.controller("controller.sidebar",e),e.$inject=["dataservice","config"]}(angular.module("app"));